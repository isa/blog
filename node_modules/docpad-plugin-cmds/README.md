# Cmds Plugin for [DocPad](http://docpad.org)

[![Build Status](https://secure.travis-ci.org/pflannery/docpad-plugin-cmds.png?branch=master)](http://travis-ci.org/pflannery/docpad-plugin-cmds "Check this project's build status on TravisCI")
[![NPM version](https://badge.fury.io/js/docpad-plugin-cmds.png)](https://npmjs.org/package/docpad-plugin-cmds "View this project on NPM")
[![Dependency Status](https://gemnasium.com/pflannery/docpad-plugin-cmds.png)](https://gemnasium.com/pflannery/docpad-plugin-cmds)
[![Gittip donate button](http://img.shields.io/gittip/pflannery.png)](https://www.gittip.com/pflannery/ "Donate weekly to this project using Gittip")
[![Bitdeli Badge](https://d2weczhvl823v0.cloudfront.net/pflannery/docpad-plugin-cmds/trend.png)](https://bitdeli.com/free "Bitdeli Badge")

Convention:  `.bash`
Convention:  `.sh`
Convention:  `.ps1` or `.cmd` (windows only)

The above can be rendered to any extension i.e. (.html.sh) or just run as a single extension process like a script.

.bash and .sh files are supported on windows if you have gnu\bash\sh\cygwyn tools installed and in the environment path.

Scripts can determined when to run, i.e. writeAfter or generateBefore etc...

##Example usage

```sh
echo 123
echo 456
```

```sh
echo "<script>"
echo "document.write("
curl http://www.servicestack.net/ServiceStack.Northwind/customers?format=json
echo ".Customers.length);"
echo "</script>"
```

Windows cmd multiple lines

```cmd
echo 123 & echo 456
```

##Front matter options

<table>
	<thead>
		<tr>
			<th>Name</th>
			<th>Desc</th>
		</tr>
	</thead>
	<tr>
		<td>print</td>
		<td>true or false. Specifies if you want to print output to the console</td>
	</tr>
	<tr>
		<td>when</td>
		<td>
			used when wanting to run the script during a specific docpad event<br />
			(<strong>only</strong> works for scripts placed in the shell collection folder)
<ul>
<li>generateBefore 
<li>generateAfter 
<li>renderBefore
<li>renderAfter
<li>writeBefore
<li>writeAfter 
<li>render (default)
</ul>
		</td>
	</tr>
</table>

## Install

```
npm install --save docpad-plugin-cmds
```

## Config

```
cmds:
	# shell collection folder (can be an array of folder names)
	shellPath: "shell"
	
	# default collection name
	collectionName: "shell"
	
	# powershell path for windows (will also work in bash on windows)
	psPath: 'C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell' # default
```

##Ordered Scripts

When using the "when" meta scripts are sorted by relativePath. 
This allows us to execute scripts in a specific order.

example:

	# example script order with relative paths
	task1.bash
	task2.bash
	
	task1\step1.bash
	task1\step2.bash
	task1\step3.bash

	task2\step1.bash
	task2\step2.bash
	task2\step3.bash

##Env

Document attributes are added to the env (in full caps with an underscore seperator) 

```bash
# bash
$DOCUMENT_TITLE, $DOCUMENT_FILENAME, etc..
$DOCPAD_CONFIG_ROOTPATH, $DOCPAD_CONFIG_OUTPATH, etc..
```

```ps1
# ps1
$env:DOCUMENT_TITLE, $env:DOCUMENT_FILENAME, etc..
$env:DOCPAD_CONFIG_ROOTPATH, $env:DOCPAD_CONFIG_OUTPATH, etc..
```

powershell c# example
```ps1
$source = @"
public class BasicTest
{
    public static int Add(int a, int b)
    {
        return (a + b);
    }

    public int Multiply(int a, int b)
    {
        return (a * b);
    }
}
"@

# load the source
Add-Type -TypeDefinition $source

# static ref
[BasicTest]::Add(4, 3)

# instance ref
$basicTestObject = New-Object BasicTest 
$basicTestObject.Multiply(5, 2)
```

## History
[You can discover the history inside the `History.md` file](https://github.com/pflannery/docpad-plugin-cmds/blob/master/History.md#files)

## Contributing
[You can discover the contributing instructions inside the `Contributing.md` file](https://github.com/bevry/docpad-plugin-cmds/blob/master/Contributing.md#files)

## License
Licensed under the incredibly [permissive](http://en.wikipedia.org/wiki/Permissive_free_software_licence) [MIT License](http://creativecommons.org/licenses/MIT/)
<br/>Copyright &copy; 2013+ Stringz Solutions Ltd
<br/>Copyright &copy; 2013+ [Peter Flannery](http://github.com/pflannery)
